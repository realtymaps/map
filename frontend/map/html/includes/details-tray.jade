include ./mixins/result-buttons.jade
include ./mixins/spinner.jade

.navbar-below.detail-container#results-slide(ng-show="Toggles.showDetails")
    .tray-close-light#detail-close(ng-click="Toggles.toggleDetails()" ng-cloak)
        i.centered.fa.fa-chevron-right.fa-2x
    #detail-list-inner
        #detail-list
            +spinner()
            //background-color:transparent; must be here to override googles meddling where it forces style via element
            ui-gmap-street-view-panorama(ng-cloak,style="background-color:transparent;",ng-if="streetViewPanorama.status == 'OK'",focalcoord="selectedResult.geom_point_json",radius="50",imagestatus="streetViewPanorama.status",control="controls.streetView")
            include ./satilite-map.jade
            .info.container
                .row
                    .col-sm-7
                        .address {{selectedResult.street_address_num}} {{selectedResult.street_address_name}} {{selectedResult.street_address_unit}}
                        .city-state-zip {{formatters.results.getCityStateZip(selectedResult)}}
                        +resultButtons('selectedResult')
                    .col-sm-5
                        .price(ng-if="selectedResult.price")
                            span.price-label {{formatters.results.getPriceLabel(selectedResult.rm_status)}}&nbsp;
                            | {{formatters.results.getPrice(selectedResult.price)}}
                        .below-price
                            .property-status(ng-class="formatters.results.getStatusLabelClass(selectedResult,true)") {{selectedResult.rm_status}}
                            .sold-date.info.title(ng-if="formatters.results.showSoldDate(selectedResult)") sold: {{selectedResult.close_date.toLocaleString() | date : 'MM/dd/yyyy'}}
                .row.beds-baths-sqft
                    .col-sm-12.detail-section-title Property Info
                .row.quick-summary
                    .col-sm-3(ng-if="selectedResult.bedrooms" ng-cloak)
                        span.data {{formatters.results.orNa(selectedResult.bedrooms)}}
                        span.title Beds
                    .col-sm-3(ng-if="selectedResult.baths_total" ng-cloak)
                        span.data {{formatters.results.orNa(selectedResult.baths_total)}}
                        span.title Baths
                    .col-sm-3(ng-if="selectedResult.finished_sqft" ng-cloak)
                        span.data {{formatters.results.orNa(selectedResult.finished_sqft)}}
                        span.title Sq Ft
                    .col-sm-3(ng-if="selectedResult.year_built" ng-cloak)
                        span.data {{formatters.results.getYear(selectedResult.year_built)}}
                        span.title Built
                .row.tool.quick-summary
                    .padding-top-15
                        .col-sm-3(ng-if="selectedResult.acres" ng-cloak)
                            span.data {{formatters.results.orNa(selectedResult.acres)}}
                            span.title Acres
                        .col-sm-3(ng-if="selectedResult.land_square_footage" ng-cloak)
                            span.data {{selectedResult.land_square_footage}}
                            span.title Lot SqFt
                        .col-sm-3(ng-if="selectedResult.lot_front_footage" ng-cloak)
                            span.data {{selectedResult.lot_front_footage}}
                            span.title Front Ft
                        .col-sm-3(ng-if="selectedResult.depth_footage" ng-cloak)
                            span.data {{selectedResult.depth_footage}}
                            span.title Depth Ft.

                .row.detailed_description(ng-if="selectedResult.property_information" ng-cloak)
                    .col-sm-12.detail-section-title Description
                    .row
                        .description {{selectedResult.property_information}}

                .row.owner-info(ng-if="selectedResult.owner_name || selectedResult.owner_name2 || selectedResult.owner_name")
                    .col-sm-12.detail-section-title Owner Info
                    div(ng-if="selectedResult.owner_name")
                        .col-sm-4
                            .title {{formatters.results.getCurrentOwnersTitle(selectedResult)}}:
                        .col-sm-8
                            .data(ng-if="selectedResult.owner_name") {{selectedResult.owner_name}}
                                span(ng-if="selectedResult.owner_name2")
                                    br/
                                    | {{selectedResult.owner_name2}}
                    div(ng-if="selectedResult.owner_city || selectedResult.owner_state")
                        .col-sm-4
                            .title Address:
                        .col-sm-8
                            div(ng-if="selectedResult.owner_street_address_num || selectedResult.owner_street_address_name" ng-cloak)
                                .data {{selectedResult.owner_street_address_num}} {{selectedResult.owner_street_address_name}} {{selectedResult.owner_street_address_unit}}
                                    br/
                                    | {{formatters.results.getCityStateZip(selectedResult,true)}}


                .row.listing-info(ng-if="formatters.results.showListingData(selectedResult)")
                    .col-sm-12.detail-section-title MLS Listing Info
                    .row(ng-if="selectedResult.listing_age" ng-cloak)
                        .col-sm-4
                            .title Listed For:
                        .col-sm-8
                            .data {{formatters.results.humanizeDays(selectedResult.listing_age) }}
                    .row(ng-if="selectedResult.original_price" ng-cloak)
                        .col-sm-4
                            .title Original Asking Price:
                        .col-sm-8
                            .data {{formatters.results.getPrice(selectedResult.original_price)}}
                    .row(ng-if="selectedResult.mls_close_price" ng-cloak)
                        .col-sm-4
                            .title Close Price:
                        .col-sm-8
                            .data {{formatters.results.getPrice(selectedResult.mls_close_price)}}
                    .row(ng-if="selectedResult.mls_close_date" ng-cloak)
                        .col-sm-4
                            .title Close Date:
                        .col-sm-8
                            .data
                                span(ng-if="selectedResult.mls_close_date") {{selectedResult.mls_close_date.toLocaleString() | date : 'MM/dd/yyyy'}}
                                span(ng-if="!selectedResult.mls_close_date") N/A

                .row.sale-info(ng-if="formatters.results.showSalesData(selectedResult)")
                    .col-sm-12.detail-section-title Historical Sales Info
                    .row(ng-if="selectedResult.mortgage_amount" ng-cloak)
                        .col-sm-4
                            .title Mortgage Amount:
                        .col-sm-8
                            .data {{formatters.results.getPrice(selectedResult.mortgage_amount)}}
                    .row.divider(ng-if="selectedResult.mortgage_date" ng-cloak)
                        .col-sm-4
                            .title Mortgage Date:
                        .col-sm-8
                            .data {{selectedResult.mortgage_date.toLocaleString() | date : 'MM/dd/yyyy'}}
                    .row(ng-if="formatters.results.showIfDifferentFrom(selectedResult, 'sale', 'mls_close')" ng-cloak)
                        .col-sm-4
                            .title Prior Sale Price:
                        .col-sm-8
                            .data {{formatters.results.getPrice(selectedResult.sale_price)}}
                    .row.divider(ng-if="formatters.results.showIfDifferentFrom(selectedResult, 'sale', 'mls_close')" ng-cloak)
                        .col-sm-4
                            .title Prior Sale Date:
                        .col-sm-8
                            .data
                                span(ng-if="selectedResult.sale_date") {{selectedResult.sale_date.toLocaleString() | date : 'MM/dd/yyyy'}}
                                span(ng-if="!selectedResult.sale_date") N/A
                    .row(ng-if="formatters.results.showIfDifferentFrom(selectedResult, 'prior_sale', 'mls_close') && formatters.results.showIfDifferentFrom(selectedResult, 'prior_sale', 'sale')" ng-cloak)
                        .col-sm-4
                            .title Prior Sale Price:
                        .col-sm-8
                            .data {{formatters.results.getPrice(selectedResult.prior_sale_price)}}
                    .row.divider(ng-if="formatters.results.showIfDifferentFrom(selectedResult, 'prior_sale', 'mls_close') && formatters.results.showIfDifferentFrom(selectedResult, 'prior_sale', 'sale')" ng-cloak)
                        .col-sm-4
                            .title Prior Sale Date:
                        .col-sm-8
                            .data
                                span(ng-if="selectedResult.prior_sale_date") {{selectedResult.prior_sale_date.toLocaleString() | date : 'MM/dd/yyyy'}}
                                span(ng-if="!selectedResult.prior_sale_date") N/A
