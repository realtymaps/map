include ../mixins/_noteMixin.jade

span(ng-controller="rmapsMapNotesCtrl" class="dropdown btn-group notes-list"
 dropdown on-toggle="toggled(open)" auto-close="disabled")
  button.btn.btn-transparent.nav-btn.dropdown-toggle.notes(dropdown-toggle)
    span.icon.icon-note
  .dropdown-menu.whiteblock.no-margin(ng-cloak)
    .fixed-header
      span
        a(ui-sref="projectNotes({id: selectedProject.project_id})") {{notes.length}} Notes
    .inner
      ul
        li(ng-repeat="note in map.markers.notes" ng-cloak)
          div(ng-controller="rmapsNotesModalCtrl")
            span.enity
              +noteMixin('{{note.title}}','{{note.text}}','{{$index+1}}')

              // TODO - add sketch feature in
                span.sketch
                  span.icon.icon-pen
                  span.action View attached sketch
              // TODO - add comment feature in
                span.comment
                  a(href="#comment") Leave a comment

            span.actions
              span.icon.icon-remove(ng-click="remove(note); $event.stopPropagation()")
              span.fa.fa-edit(ng-click="update(note); $event.stopPropagation()")
