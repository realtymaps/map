include ../mixins/property/_propertyAttributes.jade

.property-card(ng-controller="rmapsSmallDetailsCtrl")
  .property-img
    img(ng-cloak ng-if="!property.photos.length" ng-src="{{formatters.property.google.StreetView.getUrl(property, 245, 163)}}" title="{{property.title}}")
    .progress(ng-show="!imageLoaded && property.photos.length")
      img(ng-src="/assets/progress-big.gif")
    div(carousel carousel-image-error="/assets/mls_unavailable.png" ng-if="property.photos.length" ng-show="imageLoaded")
      div(slide ng-repeat="photo in property.photos" index="slide.key")
        img(ng-src="{{photo.url}}" style="margin:auto;")
        .carousel-caption(ng-if="photo.caption" ng-cloak) {{photo.caption}}
    span.status(ng-class="formatters.property.getStatusLabelClass(property,true)") {{property.rm_status}}
  +propertyAttributes('property')
  property-buttons(property='property'
                    pin-click='formatters.results.clickSaveResultFromList(property, $event); $event.stopPropagation()'
                    favorite-click='formatters.results.clickFavoriteResultFromList(property, $event); $event.stopPropagation()'
                    )
