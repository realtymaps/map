.property-img(ng-class="{static: !property.photos.length && panoramaControls}")
  //- .spinner(ng-if="!imageLoaded && !coverImage")
  //-   img(rmaps-cdn-image ng-src="/assets/progress-big.gif")

  rmaps-street-view-panorama.prop-image-panorama(
    ng-cloak
    ng-if="!property.photos.length"
    ng-show="panoramaOk() && panoramaControls"
    style="background-color:transparent;"
    focalcoord="property.geometry_center"
    radius="50"
    imagestatus="panorama.status"
    control="controls.streetView")

  img(
    ng-cloak
    ng-if="!property.photos.length && panoramaOk() && !panoramaControls"
    ng-src="{{formatters.property.google.StreetView.getUrl(property, imageWidth, imageHeight)}}"
    title="{{property.title}}"
    ui-sref="property({id:property.rm_property_id})")

  img(
    ng-cloak
    ng-if="!property.photos.length && !panoramaOk()"
    ng-src="{{formatters.property.google.Satellite.getUrl(property, imageWidth, imageHeight)}}"
    ui-sref="property({id:property.rm_property_id})")

  img(
    ng-cloak
    ng-if="property.photos.length && coverImage"
    ng-src="{{property.photos[0].url}}"
    title="{{property.title}}"
    ui-sref="property({id:property.rm_property_id})")

  flickity.carousel(ng-if="property.photos.length && !coverImage")
    .carousel-cell(ng-repeat="photo in property.photos" index="photo.index")
      img(src="/assets/progress-big.gif" data-flickity-lazyload="{{photo.url}}")

  .prop-image-status(ng-if="showStatus" class="{{formatters.property.getStatusLabelClass(property)}}") {{formatters.property.getStatusLabel(property, imageWidth)}}
