include ./mixins/result-buttons.jade
.results-container.navbar-below#results-slide(ng-show="Toggles.showResults"
ng-init="resultsInit('results-list')")
    .tray-close#results-close(ng-click="Toggles.toggleResults()")
        i.centered.fa.fa-chevron-right.fa-2x
    #results-list-inner
        #results-header
            div(id="results-header-results-count-arrow")
            div(id="results-header-results-count")
                .ng-cloak {{resultsPotentialLength}} Results
            div(id="results-header-right")
                span.sort-by Sort by:&nbsp;
                .btn-group
                    button(id="results-sort-beds" class="btn btn-default btn-xs"
                    ng-click="formatters.results.setOrReverseResultsPredicate('bedrooms')"
                    ng-class="formatters.results.getSortClass('bedrooms')") Beds

                    button(id="results-sort-sqft" class="btn btn-default btn-xs"
                    ng-click="formatters.results.setOrReverseResultsPredicate('finished_sqft')"
                    ng-class="formatters.results.getSortClass('finished_sqft')") Sq Ft

                    button(id="results-sort-year" class="btn btn-default btn-xs"
                    ng-click="formatters.results.setOrReverseResultsPredicate('year_built')"
                    ng-class="formatters.results.getSortClass('year_built')") Year

                    button(id="results-sort-price" class="btn btn-default btn-xs"
                    ng-click="formatters.results.setOrReverseResultsPredicate('price')"
                    ng-class="formatters.results.getSortClass('price')") Price

                    button(id="results-sort-saved" class="btn btn-default btn-xs"
                    ng-click="formatters.results.setOrReverseResultsPredicate('savedDetails.isSaved')"
                    ng-class="formatters.results.getSortClass('savedDetails.isSaved')") Saved

        #results-list(infinite-scroll='formatters.results.loadMore()' infinite-scroll-distance='1' infinite-scroll-container='"#results-list"')
            //DEBUG repeat
            //div(ng-repeat="result in results | orderBy:resultsPredicate:resultsDescending | limitTo:resultsLimit" class="result-property" rmaps-post-repeat options="resultsRepeatPerf")
            div(ng-repeat="result in results | orderBy:resultsPredicate:resultsDescending | limitTo:resultsLimit" class="result-property")
                .card( ng-class="formatters.results.maybeAnimate()" id="l-el{{result.rm_property_id}}" ng-click="showDetails = !showDetails"
                rmaps-click="formatters.results.click" rmaps-value-name-click="result"
                rmaps-mouseenter="formatters.results.mouseenter" rmaps-value-name-mouseenter="result"
                rmaps-mouseleave="formatters.results.mouseleave" rmaps-value-name-mouseleave="result")
                    //.result-arrow
                        .box Sold
                        .arrow
                    .photo()
                        img(ng-cloak ng-src="{{formatters.results.getCurbsideImage(result)}}")
                    .info
                        .address(ng-if="result.street_address_num || result.street_address_name || result.street_address_unit",ng-cloak)
                            | {{result.street_address_num}} {{result.street_address_name}} {{result.street_address_unit}}
                            .city-state-zip {{formatters.results.getCityStateZip(result)}}
                        .price(ng-cloak)
                            .price-value {{formatters.results.getPrice(result.price)}}
                            .property-status(ng-class="formatters.results.getStatusLabelClass(result,true)") {{result.rm_status}}

                        .quick-summary
                            .beds(ng-if="result.bedrooms" ng-cloak)
                                span.data {{result.bedrooms}}
                                span.title Beds
                            .baths(ng-if="result.baths_total" ng-cloak)
                                span.data {{result.baths_total}}
                                span.title Baths
                            .sqft(ng-if="result.finished_sqft" ng-cloak)
                                span.data {{result.finished_sqft}}
                                span.title Sq Ft
                            .year(ng-if="result.year_built" ng-cloak)
                                span.data {{formatters.results.getYear(result.year_built)}}
                                span.title Built
                    .card-buttons
                      mixin resultButtons('result')
        #results-footer
            i.close.fa.fa-times.fa-3(ng-click="Toggles.toggleResults()")
